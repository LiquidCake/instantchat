<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Backends control page</title>
    <link rel="stylesheet" href="/static/${BUILD_VERSION}/css/ctrl.css" />
    <link rel="icon" type="image/png" href="/static/${BUILD_VERSION}/favicon/favicon.png">

    <script src="/static/${BUILD_VERSION}/js/common.js" type="text/javascript"></script>
    <script src="/static/${BUILD_VERSION}/js/ctrl.js" type="text/javascript"></script>

    <script type="text/javascript">
        window.addEventListener("load", init);
    </script>
</head>
<body>
<div class="main-head-wr">
    <h1>Control board</h1>
    <div>
        <p><a href="./control_page_proxy">All backend instances</a></p>
        <p><a id="rooms_list_link" href="./ctrl_rooms">Current backend rooms list</a></p>
    </div>
</div>

<div class="main-body-wr">
    <div class="main-body-row-wr">
        <div class="main-body-cell-wr main-body-left">
            <h2>Raw data exchange</h2>

            <div class="main-body-row-wr">
                <h4>Raw input</h4>
                <div id="raw_input_wr">
                    <button id="open" onClick="onManualReconnect();">Reconnect socket</button>
                    <hr />
                    <button id="raw_send" onClick="onManualSend();">Send</button>

                    <textarea id="raw_input" class="box-sizing-fix" rows="20" cols="45"></textarea>
                </div>
            </div>

            <div class="main-body-row-wr">
                <h2>Text message controls</h2>

                <div class="main-body-cell-wr main-body-room-wr">
                    <h4>Room: </h4>
                    <p>Name: <input id="r_name" type="text" value=""/></p>
                    <p>Passwd: <input id="r_passwd" type="text" value="123qwe_SOME$!%"/></p>
                    <p>Username: <input id="r_user_name" type="text" value="testUser"/></p>
                    <p><button onClick="createOrJoinRoom();">createORjoin</button></p>
                    <p><button onClick="createRoom();">create</button></p>
                    <p><button onClick="joinRoom();">join</button></p>
                    <br />
                    <p><button onClick="changeRoomUserName();">change user name</button></p>
                </div>

                <div class="main-body-cell-wr main-body-message-wr">
                    <h4>Messasge: </h4>
                    <p>Edit id: <input id="text_message_edit" type="text" value=""/></p>
                    <p>Delete id: <input id="text_message_delete" type="text" value=""/></p>
                    <p>Support/reject id: <input id="text_message_support_reject" type="text" value=""/></p>
                    <p><textarea id="text_message" rows="20" cols="35"></textarea></p>
                    <p><button id="send_text_msg" onClick="sendMsg();">send</button></p>
                    <p><button id="support_msg" onClick="supportRejectMsg(true);">support</button></p>
                    <p><button id="reject_msg" onClick="supportRejectMsg(false);">reject</button></p>
                </div>

                <div class="clear-fix"></div>
            </div>

            <div class="main-body-row-wr">
                <h4>Raw output</h4>
                <div id="raw_output" class="box-sizing-fix"></div>
            </div>
        </div>

        <div class="main-body-cell-wr main-body-right">
            <div class="main-body-row-wr main-bod y-errors_wr">
                <div class="main-body-cell-wr main_info">
                    <p>Backend instance host (#num={{.backendInstanceNum}}):
                        <input id="backend_instance_host" value="{{.backendInstanceHost}}" />
                        <button onclick="onChangeBackend();">refresh</button>
                    </p>
                    <p>Active rooms: <span id="active_rooms">{{.activeRooms}}</span></p>
                    <p>Active users: <span id="active_users">{{.activeUsers}}</span></p>
                </div>

                <h2>Errors</h2>
                <div class="main-body-cell-wr">
                    <p>rest error: <div id="rest_error_txt">{{.error}}</div></p>
                </div>
                <div class="main-body-cell-wr">
                    <p>websocket error: <div id="ws_error_txt"></div></p>
                </div>
                <div class="main-body-cell-wr">
                    <p>server error: <div id="srv_error_txt"></div></p>
                </div>

                <div class="clear-fix"></div>
            </div>

            <div class="main-body-row-wr">
                <h2>Text message output</h2>
                <div id="text_msg_output" class="box-sizing-fix"></div>
            </div>
        </div>

        <div class="clear-fix"></div>
    </div>

</div>

<script type="text/javascript">
    const BUILD_NUMBER = "${BUILD_VERSION}";    //placeholder is replaced by assistant util
</script>
</body>
</html>